function initBookingForm(t,e){var n=$(t).find(".check-in"),a=$(t).find(".check-out"),i=$(t).find(".guests"),c=$(t).attr("data-start").split("/"),r=new Date(c[2],c[0]-1,c[1]),d=$(t).attr("data-end").split("/"),u=new Date(d[2],d[0]-1,d[1]);$(n).find(".check-in-input").datepicker({startDate:r,endDate:u,autoclose:!0,orientation:"right",container:$(e)}),$(n).find(".check-in-input").datepicker("setDate",r),$(n).find(".day").text(r.getDate()),$(n).find(".month").text(months[r.getMonth()]),$(a).find(".check-out-input").datepicker({startDate:r,endDate:u,autoclose:!0,orientation:"right",container:$(e)}),$(a).find(".check-out-input").datepicker("setDate",new Date(c[2],c[0]-1,r.getDate()+1)),$(a).find(".day").text(r.getDate()+1),$(a).find(".month").text(months[r.getMonth()]),$(n).find(".check-in-input").val(""),$(a).find(".check-out-input").val(""),$(n).find(".check-in-input").on("changeDate",function(){var t=$(this).datepicker("getDate");$(n).find(".day").text(t.getDate()),$(n).find(".month").text(months[t.getMonth()]),$(this).val("");var e=$(a).find(".check-out-input").datepicker("getDate");e.getFullYear()<t.getFullYear()||e.getFullYear()==t.getFullYear()&&e.getMonth()<t.getMonth()||e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()<t.getDate()?($(a).find(".day").text(t.getDate()),$(a).find(".month").text(months[t.getMonth()]),$(a).find(".check-out-input").datepicker("setStartDate",t),$(a).find(".check-out-input").datepicker("setDate",t)):($(a).find(".check-out-input").datepicker("setStartDate",t),$(a).find(".check-out-input").datepicker("setDate",e))}),$(a).find(".check-out-input").on("changeDate",function(){var t=$(this).datepicker("getDate");$(a).find(".day").text(t.getDate()),$(a).find(".month").text(months[t.getMonth()]),$(this).val("")}),$(i).find(".mbri-arrow-up").click(function(){var t=$(i).find(".guests-count").text();$(i).find(".guests-count").text(++t)}),$(i).find(".mbri-arrow-down").click(function(){var t=$(i).find(".guests-count").text();t>1&&$(i).find(".guests-count").text(--t)})}function changeStartDate(t,e,n){var a=n.split("/"),i=new Date(a[2],a[0]-1,a[1]),c=$(e).datepicker("getDate"),r=$(t).find(".booking-datepicker").attr("data-end").split("/"),d=new Date(r[2],r[0]-1,r[1]);(c.getFullYear()<i.getFullYear()||c.getFullYear()==i.getFullYear()&&c.getMonth()<i.getMonth()||c.getFullYear()==i.getFullYear()&&c.getMonth()==i.getMonth()&&c.getDate()<i.getDate())&&$(e).datepicker("setDate",i),(d.getFullYear()<i.getFullYear()||d.getFullYear()==i.getFullYear()&&d.getMonth()<i.getMonth()||d.getFullYear()==i.getFullYear()&&d.getMonth()==i.getMonth()&&d.getDate()<i.getDate())&&($(t).find(".check-out-input").datepicker("setEndDate",i),$(t).find(".check-out-input").datepicker("setDate",i),$(t).find(".check-in-input").datepicker("setEndDate",i),$(t).find(".check-in-input").datepicker("setDate",i)),$(t).find(".check-in-input").datepicker("setStartDate",i)}function changeEndDate(t,e,n){var a=n.split("/"),i=new Date(a[2],a[0]-1,a[1]),c=($(e).datepicker("getDate"),$(".booking-datepicker").attr("data-start").split("/")),r=new Date(c[2],c[0]-1,c[1]);(r.getFullYear()>i.getFullYear()||r.getFullYear()==i.getFullYear()&&r.getMonth()>i.getMonth()||r.getFullYear()==i.getFullYear()&&r.getMonth()==i.getMonth()&&r.getDate()>i.getDate())&&($(t).find(".check-out-input").datepicker("setStartDate",i),$(t).find(".check-out-input").datepicker("setDate",i),$(t).find(".check-in-input").datepicker("setStartDate",i),$(t).find(".check-in-input").datepicker("setDate",i)),$(e).datepicker("setEndDate",i)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],isBuilder=$("html").hasClass("is-builder"),regExp=/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d/g;isBuilder?$(document).on("add.cards",function(t){if(0!=$(t.target).find(".booking-datepicker").length){var e=$(t.target);e.click(function(){$(document).find("section").each(function(){$(this).removeClass("up-z-index")}),$(this).addClass("up-z-index")}),$(t.target).find(".booking-datepicker").each(function(){initBookingForm($(this),e)})}}).on("changeParameter.cards",function(t,e,n){"startDate"==e&&n.search(regExp)>-1&&changeStartDate($(t.target),$(t.target).find(".check-in-input"),n),"endDate"==e&&n.search(regExp)>-1&&(changeEndDate($(t.target),$(t.target).find(".check-in-input"),n),changeEndDate($(t.target),$(t.target).find(".check-out-input"),n))}):$("section").each(function(){var t=$(this);$(t).find(".booking-datepicker").each(function(){t.click(function(){$(document).find("section").each(function(){$(this).removeClass("up-z-index")}),$(this).addClass("up-z-index")}),initBookingForm($(this),t);var e=$(this);$(e).find(".guests-input").val(""),$(this).find(".mbr-section-btn").click(function(){var t=$(e).find(".check-in-input").datepicker("getDate"),n=Number(t.getMonth())+1+"/"+t.getDate()+"/"+t.getFullYear();$(e).find(".check-in-input").val(n);var a=$(e).find(".check-out-input").datepicker("getDate"),i=Number(a.getMonth())+1+"/"+a.getDate()+"/"+a.getFullYear();$(e).find(".check-out-input").val(i);var c=$(e).find(".guests .date-row .guests-count").text();$(e).find(".guests-input").val(c)})})});